<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>NBA 2018/19 Season Leaders</title>
<link rel="stylesheet" href="/css/style.css" type="text/css">
<body>
<h1>NBA 2018/19 Regular Season Leaders</h1>	
<script src="https://d3js.org/d3.v3.js"></script>
<script type='text/javascript' src='/js/ppg.js'></script>
<script type='text/javascript' src='/js/apg.js'></script>
<script type='text/javascript' src='/js/spg.js'></script>
<script type='text/javascript' src='/js/mpg.js'></script>
<script type='text/javascript' src='/js/rpg.js'></script>
	
<div class="chartArea">
  <select class = "dropdownArea"></select></div>
<script>
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "ppg")
    .text("Points Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "rpg")
    .text("Rebounds Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "apg")
    .text("Assists Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "spg")
    .text("Steals Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "mpg")
    .text("Minutes Per Game");
	
d3.select(".dropdownArea").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        // run the updateChart function with this selected option
	if (selectedOption === "ppg") {
		d3.selectAll("svg").remove()
		populateTablePPG(selectedOption)};
    	if (selectedOption === "rpg") {
		d3.selectAll("svg").remove()
		populateTableRPG(selectedOption)};
    if (selectedOption === "apg") {
		d3.selectAll("svg").remove()
		populateTableAPG(selectedOption)};
    if (selectedOption === "spg") {
		d3.selectAll("svg").remove()
		populateTableSPG(selectedOption)};
    if (selectedOption === "mpg") {
		d3.selectAll("svg").remove()
		populateTableMPG(selectedOption)};
    })

populateTablePPG("Points Per Game")
var margin = {top: 40, right: 20, bottom: 10, left: 20}
var width = 800 - margin.left - margin.right, height = 800 - margin.top - margin.bottom	
var svg1 = d3.select("body").select(".chartArea").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)      
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
 var svgtext = svg1.append("text")
       .attr("x",(width/2))
       .attr("y",(margin.top*2))
    	.style("text-anchor","middle")
    	.style("font-size","24px")
    	.style("fill","#FFFFFF")    	
    	.style("font-weight","bold")
    	.text("Select Player Name to display Stats")  
	
var displayPlayer = function(playerName){
var margin = {top: 40, right: 20, bottom: 10, left: 20}
var width = 800 - margin.left - margin.right, height = 800 - margin.top - margin.bottom	

d3.json('Roster.json',function (data) { 
var filteredData =  data.players.filter(function(d) {if( d.name == playerName) {return d};});    

	
var svgimage = d3.selectAll("svg1")
svgimage.enter().append("svg:image")
	.attr("x",290)
    	.attr("y",(0-margin.top))
    	.attr("width", 200)
	.attr("height", 250)    	      		
    	.attr("xlink:href", filteredData[0]["imgURL"]) 
svgimage.exit()
	.remove()
	
});
}	 
//d3.select(self.frameElement).style("height", "800px").style("width", "10800px");	
</script>
</body>
</html>
