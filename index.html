<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>NBA 2018/19 Season Leaders</title>
<style>
body {
  background-color: #d1e5f0;
  background-image: url("nba.jpg");
  font: 10px sans-serif;
  color: #FFFFFF
}
.chartArea{
      position: relative;}

.dropdownArea {
      position: absolute;
      width: 250px;
      top:20px;
      left:10px;}	

#container {
  width: 420;
  height: 740;
  position: relative;
}
#container1 {
  width: 360;
  height: 740;
  position: relative;
}
#title {
  font: 14px sans-serif;
  position: absolute;
  top: -40px;
  left: 450px;
}	
#FilterableTable {
  width: 400;
  height: 700;
  position: absolute;
  top: 40px;
  left: 20px;
  font: 12px sans-serif;
}
#FilterableTable1 {
  width: 340;
  height: 680;
  position: absolute;
  top: 40px;
  left: 420px;
  font: 12px sans-serif;
}
.SearchBar { 
  display: inline; 
  position: relative;
  left: 1%;
}
.SearchBar input {
  position: relative;
  left: 2%;
}
table { 
  position: absolute;
  top: 40px;
  left: 20px;
  border-collapse: collapse;
  margin-bottom: 20px;
  font: 10px sans-serif;
}
table a:link, a:visited { text-decoration: none; }
table a:hover, a:active { text-decoration: underline; }
table, th, td { border: 1px solid black; }
td, th {
  padding: 5px;
  text-align: center;
  height: 20px;
  font: 10px sans-serif;
}
th {
  background-color: #17408B;
  color: #d9f0a3;
  font: 10px sans-serif;
}
td { background-color: #17408B; }
tr:hover td { background-color: #C9082A; }
</style>	
<body>
<h1>NBA 2018/19 Regular Season Leaders</h1>	
<script src="https://d3js.org/d3.v3.js"></script>
<div class="chartArea">
  <select class = "dropdownArea"></select></div>
<script>

var populateTablePPG = function(val) {
var column_names = ["Player Name","Team","Position","Games Played","Points Per Game"];
var clicks = {name: 0, team: 0, position: 0,games_played: 0,ppg:0};

// draw the table
var margin = {top: 40, right: 20, bottom: 10, left: 10}
var width = 450 - margin.left - margin.right, height = 800 - margin.top - margin.bottom	
var svg = d3.select("body").select(".chartArea").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)      
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

d3.select(".dropdownArea")
    .append("option")
    .attr("value", "ppg")
    .text("Points Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "rpg")
    .text("Rebounds Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "apg")
    .text("Assists Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "spg")
    .text("Steals Per Game");
d3.select(".dropdownArea")
    .append("option")
    .attr("value", "mpg")
    .text("Minutes Per Game");
	
var forobj = svg.append("foreignObject")
      .attr("width", 430)
      .attr("height", 740)
      .append("xhtml:body")

forobj.append("div")
	.attr("id", "container")
  	.attr("class","column")
	
d3.select("#container").append("div")
  	.attr("id", "FilterableTable")
  
d3.select("#FilterableTable").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");

var table = d3.select("#FilterableTable").append("table");
table.append("thead").append("tr");

var headers = table.select("tr").selectAll("th")
    .data(column_names)
    .enter()
    .append("th")
    .text(function(d) { return d; });

var rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;
  
d3.json("data.json", function(data) { // loading data from server
  
  // draw table body with rows
  table.append("tbody")

  // data bind
  rows = table.select("tbody").selectAll("tr")
    .data(data, function(d){ return d.Name; });
  
  // enter the rows
  rows.enter()
    .append("tr")
  
  // enter td's in each row
  row_entries = rows.selectAll("td")
      .data(function(d) { 
        var arr = [];
        for (var k in d) {
          if (d.hasOwnProperty(k)) {
		    arr.push(d[k]);
          }
        }
        return [arr[0],arr[1],arr[2],arr[4],arr[25]];
      })
    .enter()
      .append("td") 

  // draw row entries with no anchor 
  row_entries_no_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == false)
  })
  row_entries_no_anchor.text(function(d) { return d; })

  // draw row entries with anchor
  row_entries_with_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == true)  
  })
  row_entries_with_anchor
    .append("a")
    .attr("href", function(d) { return d; })
    .attr("target", "_blank")
  .text(function(d) { return d; })
    
    
  /**  search functionality **/
    d3.select("#search")
      .on("keyup", function() { // filter according to key pressed 
        var searched_data = data,
            text = this.value.trim();
        
        var searchResults = searched_data.map(function(r) {
          var regex = new RegExp("^" + text + ".*", "i");
          if (regex.test(r.Name)) { // if there are any results
            return regex.exec(r.Name)[0]; // return them to searchResults
          } 
        })
	    
	    // filter blank entries from searchResults
        searchResults = searchResults.filter(function(r){ 
          return r != undefined;
        })
        
        // filter dataset with searchResults
        searched_data = searchResults.map(function(r) {
           return data.filter(function(p) {
            return p.Name.indexOf(r) != -1;
          })
        })

        // flatten array 
		searched_data = [].concat.apply([], searched_data)
        
        // data bind with new data
		rows = table.select("tbody").selectAll("tr")
		  .data(searched_data, function(d){ return d.Name; })

		
        // enter the rows
        rows.enter()
         .append("tr")
	 
         
        // enter td's in each row
        row_entries = rows.selectAll("td")
            .data(function(d) { 
              var arr = [];
              for (var k in d) {
                if (d.hasOwnProperty(k)) {
		          arr.push(d[k]);
                }
              }
              return [arr[0],arr[1],arr[2],arr[4],arr[25]];
            })
          .enter()
            .append("td") 

        // draw row entries with no anchor 
        row_entries_no_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == false)
        })
        row_entries_no_anchor.text(function(d) { return d; })

        // draw row entries with anchor
        row_entries_with_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == true)  
        })
        row_entries_with_anchor
          .append("a")
          .attr("href", function(d) { return d; })
          .attr("target", "_blank")
        .text(function(d) { return d; })
        
        // exit
        rows.exit().remove();
      })
	
  /**  sort functionality **/
  headers
    .on("click", function(d) {
      if (d == "Player Name") {
        clicks.name++;
        // even number of clicks
        if (clicks.name % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return -1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.name % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return 1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
      if (d == "Position") {
        clicks.position++;
        // even number of clicks
        if (clicks.position % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return -1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.position % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return 1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
    
      if (d == "Games Played") {
	    clicks.games_played++;
        // even number of clicks
        if (clicks.games_played % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return -1; 
            } else if (+a.GP > +b.GP) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.games_played % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return 1; 
            } else if (+a.GP > +b.GP) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
	if (d == "Points Per Game") {
	    clicks.ppg++;
        // even number of clicks
        if (clicks.ppg % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.PPG < +b.PPG) { 
              return -1; 
            } else if (+a.PPG > +b.PPG) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.ppg % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.PPG < +b.PPG) { 
              return 1; 
            } else if (+a.PPG > +b.PPG) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          if (d == "Team") {
        clicks.team++;
        // even number of clicks
        if (clicks.team % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return -1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.team % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return 1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          
    }) // end of click listeners
// table row click

table.selectAll("tr").on("click",function(d,i){	
	displayPlayer(d.Name)
});

});
}

// For RPG
var populateTableRPG = function(val) {
var column_names = ["Player Name","Team","Position","Games Played","Rebounds Per Game"];
var clicks = {name: 0, team: 0, position: 0,games_played: 0,rpg:0};

// draw the table
d3.select("body").append("div")
  .attr("id", "container")

d3.select("#container").append("div")
  .attr("id", "FilterableTable");

d3.select("#FilterableTable").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");
  
var table = d3.select("#FilterableTable").append("table");
table.append("thead").append("tr"); 

var headers = table.select("tr").selectAll("th")
    .data(column_names)
  .enter()
    .append("th")
    .text(function(d) { return d; });

var rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;
  
d3.json("data.json", function(data) { // loading data from server
  
  // draw table body with rows
  table.append("tbody")

  // data bind
  rows = table.select("tbody").selectAll("tr")
    .data(data, function(d){ return d.Name; });
  
  // enter the rows
  rows.enter()
    .append("tr")
  
  // enter td's in each row
  row_entries = rows.selectAll("td")
      .data(function(d) { 
        var arr = [];
        for (var k in d) {
          if (d.hasOwnProperty(k)) {
		    arr.push(d[k]);
          }
        }
        return [arr[0],arr[1],arr[2],arr[4],arr[26]];
      })
    .enter()
      .append("td") 

  // draw row entries with no anchor 
  row_entries_no_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == false)
  })
  row_entries_no_anchor.text(function(d) { return d; })

  // draw row entries with anchor
  row_entries_with_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == true)  
  })
  row_entries_with_anchor
    .append("a")
    .attr("href", function(d) { return d; })
    .attr("target", "_blank")
  .text(function(d) { return d; })
    
    
  /**  search functionality **/
    d3.select("#search")
      .on("keyup", function() { // filter according to key pressed 
        var searched_data = data,
            text = this.value.trim();
        
        var searchResults = searched_data.map(function(r) {
          var regex = new RegExp("^" + text + ".*", "i");
          if (regex.test(r.Name)) { // if there are any results
            return regex.exec(r.Name)[0]; // return them to searchResults
          } 
        })
	    
	    // filter blank entries from searchResults
        searchResults = searchResults.filter(function(r){ 
          return r != undefined;
        })
        
        // filter dataset with searchResults
        searched_data = searchResults.map(function(r) {
           return data.filter(function(p) {
            return p.Name.indexOf(r) != -1;
          })
        })

        // flatten array 
		searched_data = [].concat.apply([], searched_data)
        
        // data bind with new data
		rows = table.select("tbody").selectAll("tr")
		  .data(searched_data, function(d){ return d.Name; })
		
        // enter the rows
        rows.enter()
         .append("tr");
         
        // enter td's in each row
        row_entries = rows.selectAll("td")
            .data(function(d) { 
              var arr = [];
              for (var k in d) {
                if (d.hasOwnProperty(k)) {
		          arr.push(d[k]);
                }
              }
              return [arr[0],arr[1],arr[2],arr[4],arr[26]];
            })
          .enter()
            .append("td") 

        // draw row entries with no anchor 
        row_entries_no_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == false)
        })
        row_entries_no_anchor.text(function(d) { return d; })

        // draw row entries with anchor
        row_entries_with_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == true)  
        })
        row_entries_with_anchor
          .append("a")
          .attr("href", function(d) { return d; })
          .attr("target", "_blank")
        .text(function(d) { return d; })
        
        // exit
        rows.exit().remove();
      })
	
  /**  sort functionality **/
  headers
    .on("click", function(d) {
      if (d == "Player Name") {
        clicks.name++;
        // even number of clicks
        if (clicks.name % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return -1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.name % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return 1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
      if (d == "Position") {
        clicks.position++;
        // even number of clicks
        if (clicks.position % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return -1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.position % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return 1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
    
      if (d == "Games Played") {
	    clicks.games_played++;
        // even number of clicks
        if (clicks.games_played % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return -1; 
            } else if (+a.GP > +b.GP) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.games_played % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return 1; 
            } else if (+a.GP > +b.GP) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
	if (d == "Rebounds Per Game") {
	    clicks.rpg++;
        // even number of clicks
        if (clicks.rpg % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.RPG < +b.RPG) { 
              return -1; 
            } else if (+a.RPG > +b.RPG) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.rpg % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.RPG < +b.RPG) { 
              return 1; 
            } else if (+a.RPG > +b.RPG) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          if (d == "Team") {
        clicks.team++;
        // even number of clicks
        if (clicks.team % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return -1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.team % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return 1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          
    }) // end of click listeners
});
}

//For APG
var populateTableAPG = function(val) {
var column_names = ["Player Name","Team","Position","Games Played","Assists Per Game"];
var clicks = {name: 0, team: 0, position: 0,games_played: 0,apg:0};

// draw the table
d3.select("body").append("div")
  .attr("id", "container")

d3.select("#container").append("div")
  .attr("id", "FilterableTable");

d3.select("#FilterableTable").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");
  
var table = d3.select("#FilterableTable").append("table");
table.append("thead").append("tr"); 

var headers = table.select("tr").selectAll("th")
    .data(column_names)
  .enter()
    .append("th")
    .text(function(d) { return d; });

var rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;
  
d3.json("data.json", function(data) { // loading data from server
  
  // draw table body with rows
  table.append("tbody")

  // data bind
  rows = table.select("tbody").selectAll("tr")
    .data(data, function(d){ return d.Name; });
  
  // enter the rows
  rows.enter()
    .append("tr")
  
  // enter td's in each row
  row_entries = rows.selectAll("td")
      .data(function(d) { 
        var arr = [];
        for (var k in d) {
          if (d.hasOwnProperty(k)) {
		    arr.push(d[k]);
          }
        }
        return [arr[0],arr[1],arr[2],arr[4],arr[28]];
      })
    .enter()
      .append("td") 

  // draw row entries with no anchor 
  row_entries_no_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == false)
  })
  row_entries_no_anchor.text(function(d) { return d; })

  // draw row entries with anchor
  row_entries_with_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == true)  
  })
  row_entries_with_anchor
    .append("a")
    .attr("href", function(d) { return d; })
    .attr("target", "_blank")
  .text(function(d) { return d; })
    
    
  /**  search functionality **/
    d3.select("#search")
      .on("keyup", function() { // filter according to key pressed 
        var searched_data = data,
            text = this.value.trim();
        
        var searchResults = searched_data.map(function(r) {
          var regex = new RegExp("^" + text + ".*", "i");
          if (regex.test(r.Name)) { // if there are any results
            return regex.exec(r.Name)[0]; // return them to searchResults
          } 
        })
	    
	    // filter blank entries from searchResults
        searchResults = searchResults.filter(function(r){ 
          return r != undefined;
        })
        
        // filter dataset with searchResults
        searched_data = searchResults.map(function(r) {
           return data.filter(function(p) {
            return p.Name.indexOf(r) != -1;
          })
        })

        // flatten array 
		searched_data = [].concat.apply([], searched_data)
        
        // data bind with new data
		rows = table.select("tbody").selectAll("tr")
		  .data(searched_data, function(d){ return d.Name; })
		
        // enter the rows
        rows.enter()
         .append("tr");
         
        // enter td's in each row
        row_entries = rows.selectAll("td")
            .data(function(d) { 
              var arr = [];
              for (var k in d) {
                if (d.hasOwnProperty(k)) {
		          arr.push(d[k]);
                }
              }
              return [arr[0],arr[1],arr[2],arr[4],arr[28]];
            })
          .enter()
            .append("td") 

        // draw row entries with no anchor 
        row_entries_no_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == false)
        })
        row_entries_no_anchor.text(function(d) { return d; })

        // draw row entries with anchor
        row_entries_with_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == true)  
        })
        row_entries_with_anchor
          .append("a")
          .attr("href", function(d) { return d; })
          .attr("target", "_blank")
        .text(function(d) { return d; })
        
        // exit
        rows.exit().remove();
      })
	
  /**  sort functionality **/
  headers
    .on("click", function(d) {
      if (d == "Player Name") {
        clicks.name++;
        // even number of clicks
        if (clicks.name % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return -1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.name % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return 1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
      if (d == "Position") {
        clicks.position++;
        // even number of clicks
        if (clicks.position % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return -1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.position % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return 1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
    
      if (d == "Games Played") {
	    clicks.games_played++;
        // even number of clicks
        if (clicks.games_played % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return -1; 
            } else if (+a.GP > +b.GP) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.games_played % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return 1; 
            } else if (+a.GP > +b.GP) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
	if (d == "Assists Per Game") {
	    clicks.apg++;
        // even number of clicks
        if (clicks.apg % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.APG < +b.APG) { 
              return -1; 
            } else if (+a.APG > +b.APG) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.apg % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.APG < +b.APG) { 
              return 1; 
            } else if (+a.APG > +b.APG) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          if (d == "Team") {
        clicks.team++;
        // even number of clicks
        if (clicks.team % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return -1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.team % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return 1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          
    }) // end of click listeners
});
}

//For Steals
var populateTableSPG = function(val) {
var column_names = ["Player Name","Team","Position","Games Played","Steals Per Game"];
var clicks = {name: 0, team: 0, position: 0,games_played: 0,spg:0};

// draw the table
d3.select("body").append("div")
  .attr("id", "container")

d3.select("#container").append("div")
  .attr("id", "FilterableTable");

d3.select("#FilterableTable").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");
  
var table = d3.select("#FilterableTable").append("table");
table.append("thead").append("tr"); 

var headers = table.select("tr").selectAll("th")
    .data(column_names)
  .enter()
    .append("th")
    .text(function(d) { return d; });

var rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;
  
d3.json("data.json", function(data) { // loading data from server
  
  // draw table body with rows
  table.append("tbody")

  // data bind
  rows = table.select("tbody").selectAll("tr")
    .data(data, function(d){ return d.Name; });
  
  // enter the rows
  rows.enter()
    .append("tr")
  
  // enter td's in each row
  row_entries = rows.selectAll("td")
      .data(function(d) { 
        var arr = [];
        for (var k in d) {
          if (d.hasOwnProperty(k)) {
		    arr.push(d[k]);
          }
        }
        return [arr[0],arr[1],arr[2],arr[4],arr[30]];
      })
    .enter()
      .append("td") 

  // draw row entries with no anchor 
  row_entries_no_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == false)
  })
  row_entries_no_anchor.text(function(d) { return d; })

  // draw row entries with anchor
  row_entries_with_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == true)  
  })
  row_entries_with_anchor
    .append("a")
    .attr("href", function(d) { return d; })
    .attr("target", "_blank")
  .text(function(d) { return d; })
    
    
  /**  search functionality **/
    d3.select("#search")
      .on("keyup", function() { // filter according to key pressed 
        var searched_data = data,
            text = this.value.trim();
        
        var searchResults = searched_data.map(function(r) {
          var regex = new RegExp("^" + text + ".*", "i");
          if (regex.test(r.Name)) { // if there are any results
            return regex.exec(r.Name)[0]; // return them to searchResults
          } 
        })
	    
	    // filter blank entries from searchResults
        searchResults = searchResults.filter(function(r){ 
          return r != undefined;
        })
        
        // filter dataset with searchResults
        searched_data = searchResults.map(function(r) {
           return data.filter(function(p) {
            return p.Name.indexOf(r) != -1;
          })
        })

        // flatten array 
		searched_data = [].concat.apply([], searched_data)
        
        // data bind with new data
		rows = table.select("tbody").selectAll("tr")
		  .data(searched_data, function(d){ return d.Name; })
		
        // enter the rows
        rows.enter()
         .append("tr");
         
        // enter td's in each row
        row_entries = rows.selectAll("td")
            .data(function(d) { 
              var arr = [];
              for (var k in d) {
                if (d.hasOwnProperty(k)) {
		          arr.push(d[k]);
                }
              }
              return [arr[0],arr[1],arr[2],arr[4],arr[30]];
            })
          .enter()
            .append("td") 

        // draw row entries with no anchor 
        row_entries_no_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == false)
        })
        row_entries_no_anchor.text(function(d) { return d; })

        // draw row entries with anchor
        row_entries_with_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == true)  
        })
        row_entries_with_anchor
          .append("a")
          .attr("href", function(d) { return d; })
          .attr("target", "_blank")
        .text(function(d) { return d; })
        
        // exit
        rows.exit().remove();
      })
	
  /**  sort functionality **/
  headers
    .on("click", function(d) {
      if (d == "Player Name") {
        clicks.name++;
        // even number of clicks
        if (clicks.name % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return -1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.name % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return 1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
      if (d == "Position") {
        clicks.position++;
        // even number of clicks
        if (clicks.position % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return -1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.position % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return 1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
    
      if (d == "Games Played") {
	    clicks.games_played++;
        // even number of clicks
        if (clicks.games_played % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return -1; 
            } else if (+a.GP > +b.GP) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.games_played % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return 1; 
            } else if (+a.GP > +b.GP) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
	if (d == "Steals Per Game") {
	    clicks.spg++;
        // even number of clicks
        if (clicks.spg % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.SPG < +b.SPG) { 
              return -1; 
            } else if (+a.SPG > +b.SPG) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.spg % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.SPG < +b.SPG) { 
              return 1; 
            } else if (+a.SPG > +b.SPG) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          if (d == "Team") {
        clicks.team++;
        // even number of clicks
        if (clicks.team % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return -1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.team % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return 1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          
    }) // end of click listeners
});
}

//For Minutes
var populateTableMPG = function(val) {
var column_names = ["Player Name","Team","Position","Games Played","Minutes Per Game"];
var clicks = {name: 0, team: 0, position: 0,games_played: 0,mpg:0};

// draw the table
d3.select("body").append("div")
  .attr("id", "container")

d3.select("#container").append("div")
  .attr("id", "FilterableTable");

d3.select("#FilterableTable").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");
  
var table = d3.select("#FilterableTable").append("table");
table.append("thead").append("tr"); 

var headers = table.select("tr").selectAll("th")
    .data(column_names)
  .enter()
    .append("th")
    .text(function(d) { return d; });

var rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;
  
d3.json("data.json", function(data) { // loading data from server
  
  // draw table body with rows
  table.append("tbody")

  // data bind
  rows = table.select("tbody").selectAll("tr")
    .data(data, function(d){ return d.Name; });
  
  // enter the rows
  rows.enter()
    .append("tr")
  
  // enter td's in each row
  row_entries = rows.selectAll("td")
      .data(function(d) { 
        var arr = [];
        for (var k in d) {
          if (d.hasOwnProperty(k)) {
		    arr.push(d[k]);
          }
        }
        return [arr[0],arr[1],arr[2],arr[4],arr[5]];
      })
    .enter()
      .append("td") 

  // draw row entries with no anchor 
  row_entries_no_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == false)
  })
  row_entries_no_anchor.text(function(d) { return d; })

  // draw row entries with anchor
  row_entries_with_anchor = row_entries.filter(function(d) {
    return (/https?:\/\//.test(d) == true)  
  })
  row_entries_with_anchor
    .append("a")
    .attr("href", function(d) { return d; })
    .attr("target", "_blank")
  .text(function(d) { return d; })
    
    
  /**  search functionality **/
    d3.select("#search")
      .on("keyup", function() { // filter according to key pressed 
        var searched_data = data,
            text = this.value.trim();
        
        var searchResults = searched_data.map(function(r) {
          var regex = new RegExp("^" + text + ".*", "i");
          if (regex.test(r.Name)) { // if there are any results
            return regex.exec(r.Name)[0]; // return them to searchResults
          } 
        })
	    
	    // filter blank entries from searchResults
        searchResults = searchResults.filter(function(r){ 
          return r != undefined;
        })
        
        // filter dataset with searchResults
        searched_data = searchResults.map(function(r) {
           return data.filter(function(p) {
            return p.Name.indexOf(r) != -1;
          })
        })

        // flatten array 
		searched_data = [].concat.apply([], searched_data)
        
        // data bind with new data
		rows = table.select("tbody").selectAll("tr")
		  .data(searched_data, function(d){ return d.Name; })
		
        // enter the rows
        rows.enter()
         .append("tr");
         
        // enter td's in each row
        row_entries = rows.selectAll("td")
            .data(function(d) { 
              var arr = [];
              for (var k in d) {
                if (d.hasOwnProperty(k)) {
		          arr.push(d[k]);
                }
              }
              return [arr[0],arr[1],arr[2],arr[4],arr[5]];
            })
          .enter()
            .append("td") 

        // draw row entries with no anchor 
        row_entries_no_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == false)
        })
        row_entries_no_anchor.text(function(d) { return d; })

        // draw row entries with anchor
        row_entries_with_anchor = row_entries.filter(function(d) {
          return (/https?:\/\//.test(d) == true)  
        })
        row_entries_with_anchor
          .append("a")
          .attr("href", function(d) { return d; })
          .attr("target", "_blank")
        .text(function(d) { return d; })
        
        // exit
        rows.exit().remove();
      })
	
  /**  sort functionality **/
  headers
    .on("click", function(d) {
      if (d == "Player Name") {
        clicks.name++;
        // even number of clicks
        if (clicks.name % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return -1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.name % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Name.toUpperCase() < b.Name.toUpperCase()) { 
              return 1; 
            } else if (a.Name.toUpperCase() > b.Name.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
      if (d == "Position") {
        clicks.position++;
        // even number of clicks
        if (clicks.position % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return -1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.position % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Position.toUpperCase() < b.Position.toUpperCase()) { 
              return 1; 
            } else if (a.Position.toUpperCase() > b.Position.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
    
      if (d == "Games Played") {
	    clicks.games_played++;
        // even number of clicks
        if (clicks.games_played % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return -1; 
            } else if (+a.GP > +b.GP) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.games_played % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.GP < +b.GP) { 
              return 1; 
            } else if (+a.GP > +b.GP) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      } 
	if (d == "Minutes Per Game") {
	    clicks.mpg++;
        // even number of clicks
        if (clicks.mpg % 2 == 0) {
          // sort ascending: numerically
          rows.sort(function(a,b) { 
            if (+a.MPG < +b.MPG) { 
              return -1; 
            } else if (+a.MPG > +b.MPG) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.mpg % 2 != 0) { 
          // sort descending: numerically
          rows.sort(function(a,b) { 
            if (+a.MPG < +b.MPG) { 
              return 1; 
            } else if (+a.MPG > +b.MPG) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          if (d == "Team") {
        clicks.team++;
        // even number of clicks
        if (clicks.team % 2 == 0) {
          // sort ascending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return -1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return 1; 
            } else {
              return 0;
            }
          });
        // odd number of clicks  
        } else if (clicks.team % 2 != 0) { 
          // sort descending: alphabetically
          rows.sort(function(a,b) { 
            if (a.Team.toUpperCase() < b.Team.toUpperCase()) { 
              return 1; 
            } else if (a.Team.toUpperCase() > b.Team.toUpperCase()) { 
              return -1; 
            } else {
              return 0;
            }
          });
        }
      }  
          
    }) // end of click listeners
});
}

d3.select('#opts')
  .on('change', function() {
    var selectBox = document.getElementById("opts");
    var newValue = selectBox.options[selectBox.selectedIndex].value;
    if (newValue === "ppg") {
	container.remove()
	populateTablePPG(newValue)};
    if (newValue === "rpg") {
	container.remove()
	populateTableRPG(newValue)};
    if (newValue === "apg") {
	container.remove()
	populateTableAPG(newValue)};
    if (newValue === "spg") {
	container.remove()
	populateTableSPG(newValue)};
    if (newValue === "mpg") {
	container.remove()
	populateTableMPG(newValue)};
	
});

populateTablePPG("Points Per Game")

var displayPlayer = function(playerName){
d3.json('Roster.json',function (data) {  
	var filteredData =  data.players.filter(function(d) {if( d.name == playerName) {return d};});

// draw the table
d3.select("body").append("div")
  .attr("id", "container1")
  .attr("class","column")
	
d3.select("#container1").append("div")
  .attr("id", "FilterableTable1")
  
d3.select("#FilterableTable1").append("div")
  .attr("class", "SearchBar")
  .append("p")
    .attr("class", "SearchBar")
    .text("Search By Player Name:");

d3.select(".SearchBar")
  .append("input")
    .attr("class", "SearchBar")
    .attr("id", "search")
    .attr("type", "text")
    .attr("placeholder", "Search...");

});
}	
 
d3.select(self.frameElement).style("height", "800px").style("width", "10800px");	
</script>
</body>
</html>
